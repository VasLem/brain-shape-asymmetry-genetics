function constructFilterSettingsWindow(obj)

obj.FilterFigure = figure(	'Tag', 'FilterFigure', ...
	'Units', 'characters', ...
	'Position', [103.833333333333 47.625 82.6666666666667 13.8125], ...
	'Name', ['Settings ' obj.Tag], ...
	'MenuBar', 'none', ...
	'NumberTitle', 'off', ...
    'Visible','off',...
    'Resize','off',...
    'CloseRequestFcn',@CloseCallback,...
	'Color', get(0,'DefaultUicontrolBackgroundColor'));

tabpanel = uitabpanel(...
  'Parent',obj.FilterFigure,...
  'TabPosition','lefttop',...
  'Units','normalized',...
  'Position',[0.01,0.01,0.98,0.98],...
  'Margins',{[0,-1,1,0],'pixels'},...
  'Title',{'Smoothing','Triangles'},...
  'TitleBackgroundColor',get(0,'DefaultUicontrolBackgroundColor'),...
  'TitleForegroundColor',[0 0 0.502],...
  'PanelBackgroundColor',get(0,'DefaultUicontrolBackgroundColor'),...
  'FrameBackgroundColor',get(0,'DefaultUicontrolBackgroundColor'),...
  'PanelBorderType','none',...
  'ResizeFcn',[]);
panels = getappdata(tabpanel,'panels');
% ----- SMOOTHING ----------
smoothingpanel1 = uibuttongroup(	'Parent', panels(1), ...
	'Tag', '', ...
	'UserData', obj, ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0579710144927536 0.202970297029703 0.296066252587992 0.599009900990099], ...
	'Title', 'Mode',...
    'SelectionChangeFcn',@SmoothingModeCallback);
smoothingpanel2 = uipanel(	'Parent', panels(1), ...
	'Tag', '', ...
	'UserData', [], ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.540372670807453 0.207920792079208 0.416149068322981 0.594059405940594], ...
	'Title', 'Runs');
CombinatorialButton = uicontrol(	'Parent', smoothingpanel1, ...
	'Tag', 'combinatorial', ...
	'UserData', [], ...
	'Style', 'radiobutton', ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0935251798561151 0.592233009708738 0.834532374100719 0.262135922330097], ...
	'String', 'Combinatorial', ...
	'Callback', []);
DistanceButton = uicontrol(	'Parent', smoothingpanel1, ...
	'Tag', 'distance', ...
	'UserData', [], ...
	'Style', 'radiobutton', ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0935251798561151 0.330097087378641 0.798561151079137 0.262135922330097], ...
	'String', 'Distance', ...
	'Callback', []);
ConformalButton = uicontrol(	'Parent', smoothingpanel1, ...
	'Tag', 'conformal', ...
	'UserData', [], ...
	'Style', 'radiobutton', ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0935251798561151 0.0679611650485437 0.827338129496403 0.262135922330097], ...
	'String', 'Conformal', ...
	'Callback', []);
popupmenu1 = uicontrol(	'Parent', smoothingpanel2, ...
	'Tag', 'SmoothRunsMenu', ...
	'UserData', obj, ...
	'Style', 'popupmenu', ...
	'Units', 'normalized', ...
	'Position', [0.0710659898477157 0.431372549019608 0.852791878172589 0.245098039215686], ...
	'BackgroundColor', [1 1 1], ...
	'String', {'1' '2' '3' '4' '5' '6' '7' '8' '9' '10'}, ...
	'Callback', @SmoothingRunsCallback, ...
	'CreateFcn', []);
% ------ TRIANGLES ----------------
trianglepanel1 = uibuttongroup(	'Parent', panels(2), ...
	'Tag', 'uipanel2', ...
	'UserData', obj, ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0227743271221533 0.202970297029703 0.474120082815735 0.599009900990099], ...
	'Title', 'Subdivide Mode',...
    'SelectionChangeFcn',@SubdivideModeCallback);
trianglepanel2 = uipanel(	'Parent', panels(2), ...
	'Tag', 'uipanel3', ...
	'UserData', [], ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.540372670807453 0.198019801980198 0.405797101449275 0.603960396039604], ...
	'Title', 'Reduce %');
trianglerunbutton = uicontrol(	'Parent', trianglepanel1, ...
	'Tag', 'runs', ...
	'UserData', [], ...
	'Style', 'radiobutton', ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0444444444444444 0.592233009708738 0.324444444444444 0.262135922330097], ...
	'String', 'Runs', ...
	'Callback', []);
trianglesizebutton = uicontrol(	'Parent', trianglepanel1, ...
	'Tag', 'size', ...
	'UserData', [], ...
	'Style', 'radiobutton', ...
	'Units', 'normalized', ...
    'ForegroundColor',[0 0 0.502],...
	'Position', [0.0444444444444444 0.184466019417476 0.386666666666667 0.271844660194175], ...
	'String', 'Size', ...
	'Callback', []);
trianglemenu1 = uicontrol(	'Parent', trianglepanel1, ...
	'Tag', 'SubdivideValMenu', ...
	'UserData', obj, ...
	'Style', 'popupmenu', ...
	'Units', 'normalized', ...
	'Position', [0.417777777777778 0.4 0.528888888888889 0.252427184466019], ...
	'BackgroundColor', [1 1 1], ...
	'String', {'1' '2' '3' '4' '5' '6' '7' '8' '9' '10'}, ...
	'Callback', @SubdivideValCallback, ...
	'CreateFcn', []);
% trianglemenu2 = uicontrol(	'Parent', trianglepanel1, ...
% 	'Tag', 'SubdivideSizeMenu', ...
% 	'UserData', obj, ...
%     'Enable', 'off',...
% 	'Style', 'popupmenu', ...
% 	'Units', 'normalized', ...
% 	'Position', [0.417777777777778 0.194174757281553 0.528888888888889 0.252427184466019], ...
% 	'BackgroundColor', [1 1 1], ...
% 	'String', {'1' '2' '3' '4' '5' '6' '7' '8' '9' '10'}, ...
% 	'Callback', @SubdivideSizeCallback, ...
% 	'CreateFcn', []);
trianglemenu3 = uicontrol(	'Parent', trianglepanel2, ...
	'Tag', 'ReducePercentageMenu', ...
	'UserData', obj, ...
	'Style', 'popupmenu', ...
	'Units', 'normalized', ...
	'Position', [0.109375 0.442307692307692 0.786458333333333 0.240384615384615], ...
	'BackgroundColor', [1 1 1], ...
	'String', {'5' '10' '15' '20' '25' '30' '35' '40' '45' '50' '55' '60' '65' '70' '75' '80' '85' '90' '95'}, ...
	'Callback', @ReducePrecentageCallback, ...
	'CreateFcn', []);


end
%% CALLBACKS

function CloseCallback(hObject,eventdata)
         set(hObject,'Visible','off');
end

%%%%% - SMOOTHING

function SmoothingModeCallback(hObject,eventdata)
         if strcmp(eventdata.EventName,'SelectionChanged');
             obj = get(hObject,'UserData');
             obj.SmoothMode = get(eventdata.NewValue,'Tag');
         end
end

function SmoothingRunsCallback(hObject,eventdata)
         obj = get(hObject,'UserData');
         obj.SmoothRuns = get(hObject,'Value');
end

%%%%% - TRIANGLES

function SubdivideModeCallback(hObject,eventdata)
         if strcmp(eventdata.EventName,'SelectionChanged');
             obj = get(hObject,'UserData');
             obj.SubdivideMode = get(eventdata.NewValue,'Tag');
         end
end

function SubdivideValCallback(hObject,eventdata)
         obj = get(hObject,'UserData');
         obj.SubdivideVal = get(hObject,'Value');
end

% function SubdivideSizeCallback(hObject,eventdata)
%          obj = get(hObject,'UserData');
%          obj.SubdivideSize = get(hObject,'Value');
% end

function ReducePrecentageCallback(hObject,eventdata)
         obj = get(hObject,'UserData');
         obj.ReducePercentage = get(hObject,'Value')*5;
end
